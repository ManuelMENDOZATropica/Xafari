openapi: 3.0.0
info:
  version: 1.0.0
  title: Xafari API
paths:
  /user:
    post:
      summary: add a new user
      tags:
        - users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/user"
      responses:
        "200":
          $ref: "#/components/responses/UserAdded"
        "400":
          $ref: "#/components/responses/BadRequestError"

  /user/{user_id}:
    get:
      summary: get user information
      tags:
        - users
      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "200":
          $ref: "#/components/responses/UserFound"
        "404":
          $ref: "#/components/responses/UserNotFound"
    delete:
      summary: delete an user
      tags:
        - users
      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "200":
          $ref: "#/components/responses/UserDeleted"
        "404":
          $ref: "#/components/responses/UserNotFound"
  /user/{user_id}/casas:
    get:
      summary: get casas achieved by user
      tags:
        - users
      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "404":
          $ref: "#/components/responses/UserNotFound"
        "200": 
          $ref: "#/components/responses/UserCasas"
          
  /user/{user_id}/xecretos:
    get:
      summary: get xecretos achieved by user
      tags:
        - users
      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "404":
          $ref: "#/components/responses/UserNotFound"
        "200": 
          $ref: "#/components/responses/UserXecretos"
    post:
      summary: add a xecreto achieved by user
      tags:
        - users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  description: user id
                  type: string
                url: 
                  description: url of image
                  type: string

      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "404":
          $ref: "#/components/responses/UserNotFound"
        "200":
          $ref: "#/components/responses/UserXecreto"
          
  
  /user/{user_id}/xelfies:
    get:
      summary: get xelfies achieved by user
      tags:
        - users
      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "404":
          $ref: "#/components/responses/UserNotFound"
        "200": 
          $ref: "#/components/responses/UserXelfies"
          
    post: 
      summary: add a xelfie achieved by user
      tags:
        - users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  description: user id
                  type: string
                url: 
                  description: url of image
                  type: string

      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "404":
          $ref: "#/components/responses/UserNotFound"
        "200":
          $ref: "#/components/responses/UserXelfie"

  /user/{user_id}/xperiencias:
    get:
      summary: get xperiencias achieved by user
      tags:
        - users
      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "404":
          $ref: "#/components/responses/UserNotFound"
        "200": 
          $ref: "#/components/responses/UserXperiencias"
          
    post: 
      summary: add a xperiencia achieved by user
      tags:
        - users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  description: user id
                  type: string
                url: 
                  description: url of image
                  type: string
      parameters:
        - $ref: "#/components/parameters/user_id"
      responses:
        "404":
          $ref: "#/components/responses/UserNotFound"
        "200":
          $ref: "#/components/responses/UserXperiencia"

  /casas:
    get:
      summary: get all casas
      tags:
        - casas
      responses:
        "200":
          $ref: "#/components/responses/Casas"
          
  /casa:
    post:
      summary: add a new casa
      tags:
        - casas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/casa"
      responses:
        "404":
          $ref: "#/components/responses/CasaNotFound"
        "200":
          $ref: "#/components/responses/CasaAdded"
          
  /casa/{casa_id}:
    get:
      summary: get casa information
      tags:
        - casas
      parameters:
        - $ref: "#/components/parameters/casa_id"
      responses:
        "200":
          $ref: "#/components/responses/CasaFound"
        "404":
          $ref: "#/components/responses/CasaNotFound"
    delete:
      summary: delete a casa
      tags:
        - casas
      parameters:
        - $ref: "#/components/parameters/casa_id"
      responses:
        "200":
          $ref: "#/components/responses/CasaDeleted"
        "404":
          $ref: "#/components/responses/CasaNotFound"  

  /casa/{casa_id}/xecretos:
    get:
      summary: get all xecretos belonging to a casa
      tags:
        - casas
      parameters:
        - $ref: "#/components/parameters/casa_id"
      responses:
        "200":
          $ref: "#/components/responses/CasaXecretos"
        "404":
          $ref: "#/components/responses/CasaNotFound"

    post:
      summary: put a xecreto to a casa
      tags:
        - casas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
      parameters:
        - $ref: "#/components/parameters/casa_id"
      responses:
        "200":
          $ref: "#/components/responses/CasaXecreto"
        "404":
            $ref: "#/components/responses/CasaXecretoNotFound"

  /casa/{casa_id}/xelfies:
    get:
      summary: get all xelfies belonging to a casa
      tags:
        - casas
      parameters:
        - $ref: "#/components/parameters/casa_id"
      responses:
        "200":
          $ref: "#/components/responses/CasaXelfies"
        "404":
          $ref: "#/components/responses/CasaNotFound"
    post:
      summary: put a xelfie into a casa
      tags:
        - casas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
      parameters:
        - $ref: "#/components/parameters/casa_id"
      responses:
        "200":
          $ref: "#/components/responses/CasaXelfie"
        "404":
            $ref: "#/components/responses/CasaXelfieNotFound"


  /casa/{casa_id}/xperiencias:
    get:
      summary: get all xperiencias belonging to a casa
      tags:
        - casas
      parameters:
        - $ref: "#/components/parameters/casa_id"
      responses:
        "200":
          $ref: "#/components/responses/CasaXperiencias"
        "404":
          $ref: "#/components/responses/CasaNotFound"
    post:
      summary: put a xperiencia to a casa
      tags:
        - casas
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
      parameters:
        - $ref: "#/components/parameters/casa_id"
      responses:
        "200":
          $ref: "#/components/responses/CasaXperiencia"
        "404":
            $ref: "#/components/responses/CasaXperienciaNotFound"

  /xecreto:
    post:
      summary: add a new xecreto
      tags:
        - xecretos
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/xecreto"
      responses:
        "200":
          $ref: "#/components/responses/XecretoAdded"
        "400":
          $ref: "#/components/responses/BadRequestError"
  /xecretos:
    get:
      summary: get all xecretos 
      tags:
        - xecretos
      responses:
        "200":
          $ref: "#/components/responses/Xecretos"

  /xecreto/{xecreto_id}:
    get:
      summary: get xecreto information
      tags:
        - xecretos
      parameters:
        - $ref: "#/components/parameters/xecreto_id"
      responses:
        "200":
          $ref: "#/components/responses/XecretoFound"
        "404":
          $ref: "#/components/responses/XecretoNotFound"
    delete:
      summary: delete a xecreto
      tags:
        - xecretos
      parameters:
        - $ref: "#/components/parameters/xecreto_id"
      responses:
        "200":
          $ref: "#/components/responses/XecretoDeleted"
        "404":
          $ref: "#/components/responses/XecretoNotFound"  

  /xelfie:
    post:
      summary: add a new xelfie
      tags:
        - xelfies
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/xelfie"
      responses:
        "200":
          $ref: "#/components/responses/XelfieAdded"
        "400":
          $ref: "#/components/responses/BadRequestError"
  /xelfies:
    get:
      summary: get all xelfies 
      tags:
        - xelfies
      responses:
        "200":
          $ref: "#/components/responses/Xelfies"

  /xelfie/{xelfie_id}:
    get:
      summary: get xelfie information
      tags:
        - xelfies
      parameters:
        - $ref: "#/components/parameters/xelfie_id"
      responses:
        "200":
          $ref: "#/components/responses/XelfieFound"
        "404":
          $ref: "#/components/responses/XelfieNotFound"
    delete:
      summary: delete a xelfie
      tags:
        - xelfies
      parameters:
        - $ref: "#/components/parameters/xelfie_id"
      responses:
        "200":
          $ref: "#/components/responses/XelfieDeleted"
        "404":
          $ref: "#/components/responses/XelfieNotFound"  

  /xperiencia:
    post:
      summary: add a new xperiencia
      tags:
        - xperiencias
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/xperiencia"
      responses:
        "200":
          $ref: "#/components/responses/XperienciaAdded"
        "400":
          $ref: "#/components/responses/BadRequestError"
  /xperiencias:
    get:
      summary: get all xperiencias 
      tags:
        - xelfies
      responses:
        "200":
          $ref: "#/components/responses/Xperiencias"

  /xperiencia/{xperiencia_id}:
    get:
      summary: get xperiencia information
      tags:
        - xperiencias
      parameters:
        - $ref: "#/components/parameters/xperiencia_id"
      responses:
        "200":
          $ref: "#/components/responses/XperienciaFound"
        "404":
          $ref: "#/components/responses/XperienciaNotFound"
    delete:
      summary: delete a xperiencia
      tags:
        - xperiencias
      parameters:
        - $ref: "#/components/parameters/xperiencia_id"
      responses:
        "200":
          $ref: "#/components/responses/XperienciaDeleted"
        "404":
          $ref: "#/components/responses/XperienciaNotFound"  

components:
  schemas:
    user:
      type: object
      properties:
        name:
          type: string
        age:
          description: age is required for age restricted activities
          type: number
        num_brazalete:
          type: string
        qr_iptv:
          type: string
    casa:
      type: object
      properties:
        name:
          type: string
        elemento:
          type: string
        animal:
          type: string
    xecreto:
      type: object
      properties:
        name: 
          type: string
        description:
          type: string
        familiar:
          type: boolean
        min_age: 
          type: number
        max_age: 
          type: number
    xelfie:
      type: object
      properties:
        name: 
          type: string
        description:
          type: string
        familiar:
          type: boolean
        min_age: 
          type: number
        max_age: 
          type: number
    xperiencia:
      type: object
      properties:
        name: 
          type: string
        description:
          type: string
        familiar:
          type: boolean
        min_age: 
          type: number
        max_age: 
          type: number
  responses: 
    UserAdded:
      description: User added 
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid
                  name: 
                    type: string
                  age: 
                    type: number
                  num_brazalete:
                    type: number
                  qr_iptv: 
                    type: number
    UserFound:
      description: User found
      content:
        application/json:
          schema:
            type: object
            properties:
              user: 
                type: object
                properties:
                  name:
                    type: string
                  age:
                    description: age is required for age restricted activities
                    type: number
                  num_brazalete:
                    type: string
                  qr_iptv:
                    type: string
                
            
    UserDeleted:
      description: User deleted 
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid
                    
    UserCasas:
      description: array of casas ids
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: string
                  casas:
                    type: array
                    items:
                      type: string
                      
    UserXecreto:
      description: xecreto from a user
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: string
                  xecreto:
                      type: string

    UserXecretos:
      description: array of xecretos ids
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: string
                  xecretos:
                    type: array
                    items:
                      type: string
                      
    UserXelfie:
      description: xelfie from a user
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: string
                  xelfie:
                      type: string

    UserXelfies:
      description: array of xelfies ids
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: string
                  xelfies:
                    type: array
                    items:
                      type: string


    UserXperiencia:
      description: xperiencia from a user
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: string
                  xperiencia:
                      type: string

    UserXperiencias:
      description: array of xperiencias ids
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: string
                  xperiencias:
                    type: array
                    items:
                      type: string
                      
    UserNotFound:
      description: User not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error: 
                type: string
                enum:
                  - User not found
    CasaAdded:
      description: Casa added 
      content:
        application/json:
          schema:
            type: object
            properties:
              casa:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid
                  name: 
                    type: string
                  elemento: 
                    type: string
                  animal:
                    type: string

                    
    CasaFound:
      description: Casa found
      content:
        application/json:
          schema:
            type: object
            properties:
              casa: 
                type: object
                properties:
                  name:
                    type: string
                  elemento:
                    type: string
                  animal:
                    type: string
                    
    CasaDeleted:
      description: Casa deleted 
      content:
        application/json:
          schema:
            type: object
            properties:
              casa:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid


    CasaNotFound:
      description: Casa not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error: 
                type: string
                enum:
                  - Casa not found
    Casas:
      description: list of casas
      content:
        application/json:
          schema:
            type: object
            properties:
              casas:
                type: array
                items:
                  type: string
                 
                  
    CasaXecretos:
      description: array of xecretos ids
      content:
        application/json:
          schema:
            type: object
            properties:
              casa:
                type: object
                properties:
                  id:
                    type: string
                  xecretos:
                    type: array
                    items:
                      type: string
    CasaXecreto:
      description: xecreto from a casa
      content:
        application/json:
          schema:
            type: object
            properties:
              casa:
                type: object
                properties:
                  id:
                    type: string
                  xecreto:
                      type: string
                      
    CasaXecretoNotFound:
      description: Casa or Xecreto not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error: 
                type: string
                enum:
                  - Casa not found
                  - Xecreto not found
    CasaXelfies:
      description: array of xelfies ids
      content:
        application/json:
          schema:
            type: object
            properties:
              casa:
                type: object
                properties:
                  id:
                    type: string
                  xelfies:
                    type: array
                    items:
                      type: string
                      
    CasaXelfie:
      description: xelfie from a casa
      content:
        application/json:
          schema:
            type: object
            properties:
              casa:
                type: object
                properties:
                  id:
                    type: string
                  xelfie:
                      type: string

    CasaXelfieNotFound:
      description: Casa or Xelfie not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error: 
                type: string
                enum:
                  - Casa not found
                  - Xelfie not found              
                  
    CasaXperiencias:
      description: array of xperiencia ids
      content:
        application/json:
          schema:
            type: object
            properties:
              casa:
                type: object
                properties:
                  id:
                    type: string
                  xpexiencias:
                    type: array
                    items:
                      type: string
            
    CasaXperiencia:
      description: xperiencia from a casa
      content:
        application/json:
          schema:
            type: object
            properties:
              casa:
                type: object
                properties:
                  id:
                    type: string
                  xperiencia:
                      type: string
                      
    CasaXperienciaNotFound:
      description: Casa or Xperiencia not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error: 
                type: string
                enum:
                  - Casa not found
                  - Xperiencia not found

    XecretoAdded:
      description: Xecreto added 
      content:
        application/json:
          schema:
            type: object
            properties:
              xecreto:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid
                  name: 
                    type: string
                  description: 
                    type: string
                  familiar:
                    type: boolean
                  min_age: 
                    type: number
                  max_age: 
                    type: number


    XecretoFound:
      description: Xecreto found
      content:
        application/json:
          schema:
            type: object
            properties:
              xecreto: 
                type: object
                properties:
                  name: 
                    type: string
                  description:
                    type: string
                  familiar:
                    type: boolean
                  min_age: 
                    type: number
                  max_age: 
                    type: number
                
            
    XecretoDeleted:
      description: Xecreto deleted 
      content:
        application/json:
          schema:
            type: object
            properties:
              xecreto:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid

    XecretoNotFound:
      description: Xecreto not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error: 
                type: string
                enum:
                  - Xecreto not found
    Xecretos:
      description: list of xecretos
      content:
        application/json:
          schema:
            type: object
            properties:
              xecretos:
                type: array
                items:
                  type: string


    XelfieAdded:
      description: Xelfie added 
      content:
        application/json:
          schema:
            type: object
            properties:
              xelfie:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid
                  name: 
                    type: string
                  description: 
                    type: string
                  familiar:
                    type: boolean
                  min_age: 
                    type: number
                  max_age: 
                    type: number


    XelfieFound:
      description: Xelfie found
      content:
        application/json:
          schema:
            type: object
            properties:
              xelfie: 
                type: object
                properties:
                  name: 
                    type: string
                  description:
                    type: string
                  familiar:
                    type: boolean
                  min_age: 
                    type: number
                  max_age: 
                    type: number
                
            
    XelfieDeleted:
      description: Xelfie deleted 
      content:
        application/json:
          schema:
            type: object
            properties:
              xelfie:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid

    XelfieNotFound:
      description: Xelfie not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error: 
                type: string
                enum:
                  - Xelfie not found
    Xelfies:
      description: list of xelfies
      content:
        application/json:
          schema:
            type: object
            properties:
              xelfies:
                type: array
                items:
                  type: string
                  
    XperienciaAdded:
      description: Xperiencia added 
      content:
        application/json:
          schema:
            type: object
            properties:
              xperiencia:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid
                  name: 
                    type: string
                  description: 
                    type: string
                  familiar:
                    type: boolean
                  min_age: 
                    type: number
                  max_age: 
                    type: number


    Xperienciaound:
      description: Xperiencia found
      content:
        application/json:
          schema:
            type: object
            properties:
              xperiencia: 
                type: object
                properties:
                  name: 
                    type: string
                  description:
                    type: string
                  familiar:
                    type: boolean
                  min_age: 
                    type: number
                  max_age: 
                    type: number
                
            
    XperienciaDeleted:
      description: Xperiencia deleted 
      content:
        application/json:
          schema:
            type: object
            properties:
              xperiencia:
                type: object
                properties:
                  id: 
                    type: string 
                    format: uuid

    XperienciaNotFound:
      description: Xperiencia not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error: 
                type: string
                enum:
                  - Xperiencia not found
    Xperiencias:
      description: list of xperiencias
      content:
        application/json:
          schema:
            type: object
            properties:
              xperiencias:
                type: array
                items:
                  type: string   
                  
    
    BadRequestError:
      description: Bad parameters or not enought params
      content:
        application/josn:
          schema:
            type: object
            properties:
              error:
                type: string

  parameters:
    user_id:
      name: user_id
      description: user uuid
      in: path 
      schema:
        type: string 
        format: uuid
      required: true
    casa_id:
      name: casa_id
      in: path 
      schema:
        type: string 
        format: uuid
      required: true
    xecreto_id:
      name: xecreto_id
      in: path 
      schema:
        type: string 
        format: uuid
      required: true
    xelfie_id:
      name: xecreto_id
      in: path 
      schema:
        type: string 
        format: uuid
      required: true
    xperiencia_id:
      name: xecreto_id
      in: path 
      schema:
        type: string 
        format: uuid
      required: true